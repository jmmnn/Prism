<html>
  <head>
    <title>Juxtapose: $core.name</title>
  </head>

  <script type="text/javascript" src="/jquery-1.4.3.min.js"></script>

  <script type="text/javascript">
      function updateResults(tab,params) {
          req = '/prism/$!{core.name}?template=results&debug=true&fl=id,score&'+$('#form-'+tab).serialize();
          $('#tab-'+tab+' .results').load(req);
      }

      $(document).ready(function() {
          updateResults('one');
          updateResults('two');
      });
  </script>

  <body>
    <h1>Juxtapose:$!core.name</h1>
    <hr/>
    <!-- TODO: render these core details somehow elegantly -->
    <ul>
    #foreach($key in $core.keys())
        <li>$key:${core.get($key)}</li>
    #end
    </ul>
   <hr/>


    <!-- TODO:
           * have paging controls sync'd (or not)
           * color code docs that appear in both views (id1 in 1st spot on left, 5th spot on right, e.g. same color background)
           * warp one from one document to same document in other view(s) -
               - first step could be simply to explainOther and pop the explain query and score/explanations.
           *
    -->

    #foreach($tab in ['one','two'])
      <div id="tab-$tab">
        <h2>$tab</h2>

        <form id="form-$tab" onsubmit="javascript:updateResults('$tab'); return false;">
            #foreach($param in $solr_params.keys())
              $param: <input type="text" name="$param" value="${solr_params.get($param)}" onchange="javascript:updateResults('$tab');"/>
            #end

            <input type="submit"/>
        </form>

        <div class="results">results</div>
      </div>
    #end

    <hr/>
  </body>
</html>

